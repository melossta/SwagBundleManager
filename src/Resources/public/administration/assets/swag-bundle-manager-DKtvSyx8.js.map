{"version":3,"file":"swag-bundle-manager-DKtvSyx8.js","sources":["../../../app/administration/src/module/swag-bundle/page/swag-bundle-list/swag-bundle-list.html.twig","../../../app/administration/src/module/swag-bundle/page/swag-bundle-list/index.js","../../../app/administration/src/module/swag-bundle/page/swag-bundle-detail/swag-bundle-detail.html.twig","../../../app/administration/src/module/swag-bundle/page/swag-bundle-detail/index.js","../../../app/administration/src/module/swag-bundle/page/swag-bundle-create/index.js","../../../app/administration/src/module/swag-bundle/index.js"],"sourcesContent":["{% block swag_bundle_list %}\n<sw-page class=\"swag-bundle-list\">\n    <template #smart-bar-actions>\n        <sw-button variant=\"primary\" :routerLink=\"{name:'swag.bundle.create'}\">\n            {{ $tc('swag-bundle.list.addButtonText') }}\n        </sw-button>\n    </template>\n    <template #content>\n        {% block swag_bundle_list_content %}\n            <sw-entity-listing\n                    v-if=\"bundles\"\n                    :items=\"bundles\"\n                    :repository=\"repository\"\n                    :showSelection=\"false\"\n                    :columns=\"columns\"\n                    detailRoute=\"swag-bundle.detail\"\n            >\n            </sw-entity-listing>\n        {%endblock %}\n    </template>\n</sw-page>\n{% endblock %}","import template from './swag-bundle-list.html.twig';\n\nconst {Component}= Shopware;\nconst {Criteria}= Shopware.Data;\n\nComponent.register('swag-bundle-list',{\n    template,\n\n    inject:[\n        'repositoryFactory'\n    ],\n    data(){\n        return{\n            repository:null,\n            bundles:null\n        }\n    },\n    metaInfo(){\n        return{\n            title: this.$createTitle()\n        };\n    },\n    computed:{\n        columns(){\n            return this.getColumns();\n        }\n    },\n    created(){\n        this.createdComponent();\n    },\n    methods:{\n        createdComponent(){\n            this.repository=this.repositoryFactory.create('swag_bundle')\n            this.repository.search(new Criteria(),Shopware.Context.api).then((result)=>{\n                this.bundles=result;\n            });\n        },\n        getColumns(){\n            return[\n                {\n                    property:'name',\n                    label:this.$tc('swag-bundle.list.columnName'),\n                    routerLink:'swag.bundle.detail',\n                    inlineEdit:'string',\n                    allowResize:true,\n                    primary:true\n                },\n                {\n                    property: 'discount',\n                    label: this.$tc('swag-bundle.list.columnDiscount'),\n                    inlineEdit:'number',\n                    allowResize: true\n                },\n                {\n                    property: 'discountType',\n                    label: this.$tc('swag-bundle.list.columnDiscountType'),\n                    allowResize: true\n                }\n            ]\n        }\n    }\n})","\n{% block swag_bundle_detail %}\n    <sw-page class=\"swag-bundle-detail\">\n        <template #smart-bar-actions>\n            <sw-button :routerLink=\"{ name: 'swag.bundle.index' }\">\n                {{ $tc('swag-bundle.detail.cancelButtonText') }}\n            </sw-button>\n            <sw-button-process\n                    :isLoading=\"isLoading\"\n                    :processSuccess=\"processSuccess\"\n                    variant=\"primary\"\n                    @process-finish=\"saveFinish\"\n                    @click=\"onClickSave\"\n            >\n                {{ $tc('swag-bundle.detail.saveButtonText') }}\n            </sw-button-process>\n        </template>\n\n        <template #content>\n            <sw-card-view>\n                <sw-card v-if=\"bundle\" :isLoading=\"isLoading\">\n                    <sw-text-field v-model=\"bundle.name\" :label=\"$tc('swag-bundle.detail.nameLabel')\"></sw-text-field>\n                    <sw-number-field v-model=\"bundle.discount\" :label=\"$tc('swag-bundle.detail.discountLabel')\"></sw-number-field>\n\n                    <div>\n                        <label v-for=\"option in options\" :key=\"option.value\">\n                            <input\n                                    type=\"radio\"\n                                    :value=\"option.value\"\n                                    v-model=\"discountTypeLocal\"\n                            />\n                            {{ option.name }}\n                        </label>\n                    </div>\n\n\n\n\n\n                    <div class=\"assign-products\">\n                        <label>{{ $tc('swag-bundle.detail.assignProductsLabel') }}</label>\n\n                        <!-- Dropdown + Add button -->\n                        <div style=\"display:flex; gap: 10px; margin-bottom: 15px;\">\n                            <select v-model=\"selectedProductId\">\n                                <option disabled value=\"\">{{ $tc('swag-bundle.detail.searchPlaceholder') }}</option>\n                                <option v-for=\"product in products\" :key=\"product.id\" :value=\"product.id\">\n                                    {{ product.name }}\n                                </option>\n                            </select>\n                            <sw-button variant=\"primary\" @click=\"addProductToAssigned\">\n                                {{ $tc('swag-bundle.detail.addSelected') }}\n                            </sw-button>\n                        </div>\n\n                        <!-- Assigned products list -->\n                        <ul>\n                            <li v-for=\"product in assignedProducts\" :key=\"product.id\" style=\"margin-bottom: 5px;\">\n                                {{ product.name }}\n                                <sw-button size=\"small\" variant=\"danger\" @click=\"removeProductFromAssigned(product.id)\">\n                                    {{ $tc('swag-bundle.detail.clearSelected') }}\n                                </sw-button>\n                            </li>\n                        </ul>\n\n                    </div>\n                </sw-card>\n            </sw-card-view>\n        </template>\n    </sw-page>\n{% endblock %}\n\n","import template from './swag-bundle-detail.html.twig';\n\nconst { Component, Mixin } = Shopware;\n\nComponent.register('swag-bundle-detail', {\n    template,\n    inject: [\n        'repositoryFactory'\n    ],\n\n    mixins: [\n        Mixin.getByName('notification')\n    ],\n\n    data() {\n        return {\n            discountTypeLocal: 'absolute', // default selection\n            bundle: null,\n            assignedProducts: [],\n            selectedProductId: null,\n            products: [],\n            isLoading: false,\n            processSuccess: false,\n            options: [\n                { value: 'absolute', name: 'Absolute' },\n                { value: 'percent', name: 'Percent' }\n            ]\n        };\n    },\n\n    computed: {\n\n    },\n\n\n    created() {\n        this.repository = this.repositoryFactory.create('swag_bundle');\n        this.productRepository = this.repositoryFactory.create('product');\n\n        this.loadProducts();\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (this.$route.params.id) {\n                this.getBundle();\n            } else {\n                // âœ… New bundle creation\n                this.bundle = this.repository.create(Shopware.Context.api);\n                this.discountTypeLocal = 'absolute'; // or leave null until user selects\n            }\n        },\n        loadProducts() {\n            const Criteria = Shopware.Data.Criteria;\n            const criteria = new Criteria(1, 50);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n\n            this.productRepository.search(criteria, Shopware.Context.api).then(result => {\n                this.products = result;\n            });\n        },\n\n        getBundle() {\n            const Criteria = Shopware.Data.Criteria;\n            const criteria = new Criteria();\n            criteria.addAssociation('products');\n\n            this.repository.get(this.$route.params.id, Shopware.Context.api, criteria).then((entity) => {\n                this.bundle = entity;\n\n                // ðŸ‘‡ keep local in sync with DB (fallback to default)\n                this.discountTypeLocal = this.bundle.discountType || 'absolute';\n\n                if (this.bundle.products && this.bundle.products.length > 0) {\n                    this.assignedProducts = this.bundle.products;\n                } else {\n                    this.assignedProducts = [];\n                }\n            });\n        },\n\n        onClickSave() {\n            this.isLoading = true;\n\n            // ðŸ‘‡ push local value back onto the entity before saving\n            this.bundle.discountType = this.discountTypeLocal;\n\n            // map assigned products (unchanged)\n            this.bundle.products = this.assignedProducts.map(p => ({ id: p.id }));\n\n            this.repository.save(this.bundle, Shopware.Context.api)\n                .then(() => {\n                    this.getBundle();\n                    this.isLoading = false;\n                    this.processSuccess = true;\n                })\n                .catch((exception) => {\n                    this.isLoading = false;\n                    this.createNotificationError({\n                        title: this.$tc('swag-bundle.detail.saveError'),\n                        message: exception\n                    });\n                });\n        }\n\n        ,\n        addProductToAssigned() {\n            if (!this.selectedProductId) return;\n\n            const product = this.products.find(p => p.id === this.selectedProductId);\n            if (product && !this.assignedProducts.some(ap => ap.id === product.id)) {\n                this.assignedProducts.push(product);\n                console.log('Added product:', product.name);\n            }\n\n            // reset dropdown\n            this.selectedProductId = null;\n        },\n        removeProductFromAssigned(productId) {\n            this.assignedProducts = this.assignedProducts.filter(p => p.id !== productId);\n            console.log('Removed product:', productId);\n        },\n        saveFinish() {\n            this.processSuccess = false;\n        }\n    }\n});\n","const {Component} = Shopware;\n\nComponent.extend('swag-bundle-create','swag-bundle-detail',{\n    methods:{\n        getBundle() {\n            this.bundle = this.repository.create(Shopware.Context.api);\n        },\n        onClickSave() {\n            this.isLoading = true;\n\n            this.bundle.discountType = this.discountTypeLocal;\n            this.bundle.products = this.assignedProducts.map(p => ({ id: p.id }));\n\n            this.repository.save(this.bundle, Shopware.Context.api)\n                .then(() => {\n                    this.isLoading = false;\n                    this.processSuccess = true;\n                    console.log('Saved discountType:', this.discountTypeLocal);\n                })\n                .catch((exception) => {\n                    this.isLoading = false;\n                    this.createNotificationError({\n                        title: this.$tc('swag-bundle.detail.saveError'),\n                        message: exception\n                    });\n                });\n        }\n\n\n\n    }\n});","/*import './page/swag-bundle-index';\nimport enGB from './snippet/en-GB.json';\n\nShopware.Locale.extend('en-GB', enGB);\n\nShopware.Module.register('swag-bundle', {\n    type: 'core',\n    name: 'swag-bundle',\n    title: 'swag-bundle.general.mainMenuItemGeneral',\n    description: 'swag-bundle.general.descriptionTextModule',\n    color: '#ff3d58',\n    icon: 'default-object-bundle', // You can use any icon here\n    routePrefixPath: 'swag.bundle',\n    routes: {\n        index: {\n            component: 'swag-bundle-index',\n            path: 'index'\n        }\n    },\n    navigation: [\n        {\n            id: 'swag-bundle',\n            label: 'swag-bundle.general.mainMenuItemGeneral',\n            color: '#ff3d58',\n            icon: 'regular-shopping-bag',\n            path: 'swag.bundle.index',\n            // â›” Removed parent!\n            position: 80,\n            privilege: null\n        }\n    ]\n});\n*/\n// import './page/swag-bundle-index';\n\nimport './page/swag-bundle-list';\nimport './page/swag-bundle-detail'\nimport './page/swag-bundle-create'\n\nimport deDE from './snippet/de-DE.json';\nimport enGB from './snippet/en-GB.json';\nconst {Module} = Shopware;\nShopware.Module.register('swag-bundle',\n    {\n     type:'core',\n     name:'bundle',\n     title:'swag-bundle.general.mainMenuItemGeneral',\n     description:'swag-bundle.general.descriptionTextModule',\n     color:'#ff3d58',\n     icon:'regular-shopping-bag',\n    routePrefixPath: 'swag.bundle',\n\n        snippets:{\n            'de-DE':deDE,\n            'en-GB':enGB\n        },\n        routes: {\n            index: {\n                component: 'swag-bundle-list',\n                path: 'index'\n            },\n            detail:{\n                component:'swag-bundle-detail',\n                path:'detail/:id',\n                meta:{\n                    parentPath:'swag.bundle.index'\n                }\n            },\n            create:{\n                component:'swag-bundle-create',\n                path:'create',\n                meta:{\n                    parentPath:'swag.bundle.index'\n                }\n            }\n        },\n        navigation:[{\n         label:'swag-bundle.general.mainMenuItemGeneral',\n            color:'#ff3d58',\n            path:\"swag.bundle.index\",\n            icon:\"regular-shopping-bag\",\n            position:100\n        }]\n    }\n\n\n\n)"],"names":["template$1","Component","Criteria","template","result","Mixin","criteria","entity","p","exception","product","ap","productId","Module","deDE","enGB"],"mappings":"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"}