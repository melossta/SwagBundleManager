
{% block swag_bundle_detail %}
    <sw-page class="swag-bundle-detail">
        <template #smart-bar-actions>
            <sw-button :routerLink="{ name: 'swag.bundle.index' }">
                {{ $tc('swag-bundle.detail.cancelButtonText') }}
            </sw-button>
            <sw-button-process
                    :isLoading="isLoading"
                    :processSuccess="processSuccess"
                    variant="primary"
                    @process-finish="saveFinish"
                    @click="onClickSave"
            >
                {{ $tc('swag-bundle.detail.saveButtonText') }}
            </sw-button-process>
        </template>

        <template #content>
            <sw-card-view>
                <sw-card v-if="bundle" :isLoading="isLoading">
                    <sw-text-field v-model="bundle.name" :label="$tc('swag-bundle.detail.nameLabel')"></sw-text-field>
                    <sw-number-field v-model="bundle.discount" :label="$tc('swag-bundle.detail.discountLabel')"></sw-number-field>

                    <div>
                        <label v-for="option in options" :key="option.value">
                            <input
                                    type="radio"
                                    :value="option.value"
                                    v-model="discountTypeLocal"
                            />
                            {{ option.name }}
                        </label>
                    </div>





                    <div class="assign-products">
                        <label>{{ $tc('swag-bundle.detail.assignProductsLabel') }}</label>

                        <!-- Dropdown + Add button -->
                        <div style="display:flex; gap: 10px; margin-bottom: 15px;">
                            <select v-model="selectedProductId">
                                <option disabled value="">{{ $tc('swag-bundle.detail.searchPlaceholder') }}</option>
                                <option v-for="product in products" :key="product.id" :value="product.id">
                                    {{ product.name }}
                                </option>
                            </select>
                            <sw-button variant="primary" @click="addProductToAssigned">
                                {{ $tc('swag-bundle.detail.addSelected') }}
                            </sw-button>
                        </div>

                        <!-- Assigned products list -->
                        <ul>
                            <li v-for="product in assignedProducts" :key="product.id" style="margin-bottom: 5px;">
                                {{ product.name }}
                                <sw-button size="small" variant="danger" @click="removeProductFromAssigned(product.id)">
                                    {{ $tc('swag-bundle.detail.clearSelected') }}
                                </sw-button>
                            </li>
                        </ul>

                    </div>
                </sw-card>
            </sw-card-view>
        </template>
    </sw-page>
{% endblock %}

